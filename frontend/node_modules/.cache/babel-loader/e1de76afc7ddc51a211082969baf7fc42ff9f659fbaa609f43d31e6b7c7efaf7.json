{"ast":null,"code":"import _objectSpread from\"/workspaces/ai-school/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{io}from'socket.io-client';import{toast}from'react-hot-toast';class WebSocketService{constructor(){this.socket=null;this.messageHandlers=new Map();this.reconnectAttempts=0;this.maxReconnectAttempts=5;this.isConnecting=false;this.setupDefaultHandlers();}setupDefaultHandlers(){// Default handlers for common events\nthis.on('connect',()=>{console.log('WebSocket connected');this.reconnectAttempts=0;toast.success('Real-time connection established');});this.on('disconnect',reason=>{console.log('WebSocket disconnected:',reason);if(reason==='io server disconnect'){// Server disconnected, try to reconnect\nthis.reconnect();}});this.on('connect_error',error=>{console.error('WebSocket connection error:',error);this.handleConnectionError();});this.on('reconnect_attempt',attemptNumber=>{console.log(\"Reconnection attempt \".concat(attemptNumber));this.reconnectAttempts=attemptNumber;});this.on('reconnect_failed',()=>{console.error('WebSocket reconnection failed');toast.error('Real-time connection lost. Please refresh the page.');});}connect(token){return new Promise((resolve,reject)=>{var _this$socket;if((_this$socket=this.socket)!==null&&_this$socket!==void 0&&_this$socket.connected){resolve();return;}if(this.isConnecting){reject(new Error('Connection already in progress'));return;}this.isConnecting=true;const config={url:process.env.REACT_APP_WS_URL||'ws://localhost:8000/ws',options:{transports:['websocket','polling'],autoConnect:false,reconnection:true,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:1000}};this.socket=io(config.url,_objectSpread(_objectSpread({},config.options),{},{auth:{token:token||localStorage.getItem('access_token')}}));this.socket.on('connect',()=>{this.isConnecting=false;resolve();});this.socket.on('connect_error',error=>{this.isConnecting=false;reject(error);});this.socket.connect();});}disconnect(){if(this.socket){this.socket.disconnect();this.socket=null;}}reconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){setTimeout(()=>{var _this$socket2;(_this$socket2=this.socket)===null||_this$socket2===void 0?void 0:_this$socket2.connect();},1000*(this.reconnectAttempts+1));}}handleConnectionError(){if(this.reconnectAttempts<this.maxReconnectAttempts){toast.error('Connection lost. Attempting to reconnect...');}else{toast.error('Unable to establish real-time connection');}}// Event handling\non(event,handler){this.messageHandlers.set(event,handler);if(this.socket){this.socket.on(event,handler);}}off(event){const handler=this.messageHandlers.get(event);if(handler&&this.socket){this.socket.off(event,handler);this.messageHandlers.delete(event);}}emit(event,data){var _this$socket3;if((_this$socket3=this.socket)!==null&&_this$socket3!==void 0&&_this$socket3.connected){this.socket.emit(event,data);}else{console.warn('WebSocket not connected, cannot emit event:',event);}}// Chat functionality\njoinChatRoom(roomId){this.emit('join_room',{room_id:roomId});}leaveChatRoom(roomId){this.emit('leave_room',{room_id:roomId});}sendMessage(roomId,message){this.emit('send_message',{room_id:roomId,content:message.content,message_type:message.message_type||'text',metadata:message.metadata});}// Real-time updates\nsubscribeToStudentActivity(studentId){this.emit('subscribe_student_activity',{student_id:studentId});}unsubscribeFromStudentActivity(studentId){this.emit('unsubscribe_student_activity',{student_id:studentId});}subscribeToBehaviorAlerts(){this.emit('subscribe_behavior_alerts');}unsubscribeFromBehaviorAlerts(){this.emit('unsubscribe_behavior_alerts');}subscribeToPerformanceUpdates(){this.emit('subscribe_performance_updates');}unsubscribeFromPerformanceUpdates(){this.emit('unsubscribe_performance_updates');}subscribeToNotifications(){this.emit('subscribe_notifications');}unsubscribeFromNotifications(){this.emit('unsubscribe_notifications');}// AI/ML real-time features\nsubscribeToAIModelUpdates(){this.emit('subscribe_ai_model_updates');}unsubscribeFromAIModelUpdates(){this.emit('unsubscribe_ai_model_updates');}requestAIPrediction(modelId,data){this.emit('request_ai_prediction',{model_id:modelId,data:data});}// Monitoring real-time features\nstartMonitoringSession(studentId,settings){this.emit('start_monitoring_session',{student_id:studentId,settings:settings});}stopMonitoringSession(sessionId){this.emit('stop_monitoring_session',{session_id:sessionId});}// Utility methods\nisConnected(){var _this$socket4;return((_this$socket4=this.socket)===null||_this$socket4===void 0?void 0:_this$socket4.connected)||false;}getConnectionState(){if(!this.socket)return'disconnected';return this.socket.connected?'connected':'connecting';}// Typed event handlers\nonChatMessage(handler){this.on('chat_message',handler);}onBehaviorAlert(handler){this.on('behavior_alert',handler);}onPerformanceUpdate(handler){this.on('performance_update',handler);}onNotification(handler){this.on('notification',handler);}onAIModelUpdate(handler){this.on('ai_model_update',handler);}onAIPredictionResult(handler){this.on('ai_prediction_result',handler);}onMonitoringFrame(handler){this.on('monitoring_frame',handler);}onMonitoringEvent(handler){this.on('monitoring_event',handler);}// Room management\ngetRooms(){return new Promise((resolve,reject)=>{var _this$socket5;if(!((_this$socket5=this.socket)!==null&&_this$socket5!==void 0&&_this$socket5.connected)){reject(new Error('WebSocket not connected'));return;}this.socket.emit('get_rooms');this.socket.once('rooms_list',rooms=>{resolve(rooms);});});}getRoomParticipants(roomId){return new Promise((resolve,reject)=>{var _this$socket6;if(!((_this$socket6=this.socket)!==null&&_this$socket6!==void 0&&_this$socket6.connected)){reject(new Error('WebSocket not connected'));return;}this.socket.emit('get_room_participants',{room_id:roomId});this.socket.once('room_participants',participants=>{resolve(participants);});});}// Presence management\nsetPresence(status){this.emit('set_presence',{status});}// Typing indicators\nstartTyping(roomId){this.emit('start_typing',{room_id:roomId});}stopTyping(roomId){this.emit('stop_typing',{room_id:roomId});}onTypingStart(handler){this.on('typing_start',handler);}onTypingStop(handler){this.on('typing_stop',handler);}// File sharing\nshareFile(roomId,file,onProgress){const reader=new FileReader();reader.onload=()=>{this.emit('share_file',{room_id:roomId,file_name:file.name,file_type:file.type,file_size:file.size,file_data:reader.result});};reader.readAsArrayBuffer(file);}onFileShared(handler){this.on('file_shared',handler);}// Error handling\nonError(handler){this.on('error',handler);}// Cleanup\ncleanup(){this.messageHandlers.clear();this.disconnect();}}// Create singleton instance\nexport const webSocketService=new WebSocketService();// Export for use in other modules\nexport default webSocketService;","map":{"version":3,"names":["io","toast","WebSocketService","constructor","socket","messageHandlers","Map","reconnectAttempts","maxReconnectAttempts","isConnecting","setupDefaultHandlers","on","console","log","success","reason","reconnect","error","handleConnectionError","attemptNumber","concat","connect","token","Promise","resolve","reject","_this$socket","connected","Error","config","url","process","env","REACT_APP_WS_URL","options","transports","autoConnect","reconnection","reconnectionAttempts","reconnectionDelay","_objectSpread","auth","localStorage","getItem","disconnect","setTimeout","_this$socket2","event","handler","set","off","get","delete","emit","data","_this$socket3","warn","joinChatRoom","roomId","room_id","leaveChatRoom","sendMessage","message","content","message_type","metadata","subscribeToStudentActivity","studentId","student_id","unsubscribeFromStudentActivity","subscribeToBehaviorAlerts","unsubscribeFromBehaviorAlerts","subscribeToPerformanceUpdates","unsubscribeFromPerformanceUpdates","subscribeToNotifications","unsubscribeFromNotifications","subscribeToAIModelUpdates","unsubscribeFromAIModelUpdates","requestAIPrediction","modelId","model_id","startMonitoringSession","settings","stopMonitoringSession","sessionId","session_id","isConnected","_this$socket4","getConnectionState","onChatMessage","onBehaviorAlert","onPerformanceUpdate","onNotification","onAIModelUpdate","onAIPredictionResult","onMonitoringFrame","onMonitoringEvent","getRooms","_this$socket5","once","rooms","getRoomParticipants","_this$socket6","participants","setPresence","status","startTyping","stopTyping","onTypingStart","onTypingStop","shareFile","file","onProgress","reader","FileReader","onload","file_name","name","file_type","type","file_size","size","file_data","result","readAsArrayBuffer","onFileShared","onError","cleanup","clear","webSocketService"],"sources":["/workspaces/ai-school/frontend/src/services/websocket.ts"],"sourcesContent":["import { io, Socket } from 'socket.io-client';\nimport { toast } from 'react-hot-toast';\nimport { \n  ChatMessage, \n  ChatRoom, \n  RealTimeUpdate, \n  WebSocketMessage,\n  User,\n  BehaviorEvent,\n  Notification\n} from '../types';\n\nexport interface WebSocketConfig {\n  url: string;\n  options?: {\n    transports: string[];\n    autoConnect: boolean;\n    reconnection: boolean;\n    reconnectionAttempts: number;\n    reconnectionDelay: number;\n  };\n}\n\nexport interface MessageHandler {\n  type: string;\n  handler: (data: any) => void;\n}\n\nclass WebSocketService {\n  private socket: Socket | null = null;\n  private messageHandlers: Map<string, (data: any) => void> = new Map();\n  private reconnectAttempts = 0;\n  private maxReconnectAttempts = 5;\n  private isConnecting = false;\n\n  constructor() {\n    this.setupDefaultHandlers();\n  }\n\n  private setupDefaultHandlers() {\n    // Default handlers for common events\n    this.on('connect', () => {\n      console.log('WebSocket connected');\n      this.reconnectAttempts = 0;\n      toast.success('Real-time connection established');\n    });\n\n    this.on('disconnect', (reason: string) => {\n      console.log('WebSocket disconnected:', reason);\n      if (reason === 'io server disconnect') {\n        // Server disconnected, try to reconnect\n        this.reconnect();\n      }\n    });\n\n    this.on('connect_error', (error: any) => {\n      console.error('WebSocket connection error:', error);\n      this.handleConnectionError();\n    });\n\n    this.on('reconnect_attempt', (attemptNumber: number) => {\n      console.log(`Reconnection attempt ${attemptNumber}`);\n      this.reconnectAttempts = attemptNumber;\n    });\n\n    this.on('reconnect_failed', () => {\n      console.error('WebSocket reconnection failed');\n      toast.error('Real-time connection lost. Please refresh the page.');\n    });\n  }\n\n  connect(token?: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (this.socket?.connected) {\n        resolve();\n        return;\n      }\n\n      if (this.isConnecting) {\n        reject(new Error('Connection already in progress'));\n        return;\n      }\n\n      this.isConnecting = true;\n\n      const config: WebSocketConfig = {\n        url: process.env.REACT_APP_WS_URL || 'ws://localhost:8000/ws',\n        options: {\n          transports: ['websocket', 'polling'],\n          autoConnect: false,\n          reconnection: true,\n          reconnectionAttempts: this.maxReconnectAttempts,\n          reconnectionDelay: 1000,\n        },\n      };\n\n      this.socket = io(config.url, {\n        ...config.options,\n        auth: {\n          token: token || localStorage.getItem('access_token'),\n        },\n      });\n\n      this.socket.on('connect', () => {\n        this.isConnecting = false;\n        resolve();\n      });\n\n      this.socket.on('connect_error', (error) => {\n        this.isConnecting = false;\n        reject(error);\n      });\n\n      this.socket.connect();\n    });\n  }\n\n  disconnect(): void {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n\n  private reconnect(): void {\n    if (this.reconnectAttempts < this.maxReconnectAttempts) {\n      setTimeout(() => {\n        this.socket?.connect();\n      }, 1000 * (this.reconnectAttempts + 1));\n    }\n  }\n\n  private handleConnectionError(): void {\n    if (this.reconnectAttempts < this.maxReconnectAttempts) {\n      toast.error('Connection lost. Attempting to reconnect...');\n    } else {\n      toast.error('Unable to establish real-time connection');\n    }\n  }\n\n  // Event handling\n  on(event: string, handler: (data: any) => void): void {\n    this.messageHandlers.set(event, handler);\n    if (this.socket) {\n      this.socket.on(event, handler);\n    }\n  }\n\n  off(event: string): void {\n    const handler = this.messageHandlers.get(event);\n    if (handler && this.socket) {\n      this.socket.off(event, handler);\n      this.messageHandlers.delete(event);\n    }\n  }\n\n  emit(event: string, data?: any): void {\n    if (this.socket?.connected) {\n      this.socket.emit(event, data);\n    } else {\n      console.warn('WebSocket not connected, cannot emit event:', event);\n    }\n  }\n\n  // Chat functionality\n  joinChatRoom(roomId: string): void {\n    this.emit('join_room', { room_id: roomId });\n  }\n\n  leaveChatRoom(roomId: string): void {\n    this.emit('leave_room', { room_id: roomId });\n  }\n\n  sendMessage(roomId: string, message: Partial<ChatMessage>): void {\n    this.emit('send_message', {\n      room_id: roomId,\n      content: message.content,\n      message_type: message.message_type || 'text',\n      metadata: message.metadata,\n    });\n  }\n\n  // Real-time updates\n  subscribeToStudentActivity(studentId: number): void {\n    this.emit('subscribe_student_activity', { student_id: studentId });\n  }\n\n  unsubscribeFromStudentActivity(studentId: number): void {\n    this.emit('unsubscribe_student_activity', { student_id: studentId });\n  }\n\n  subscribeToBehaviorAlerts(): void {\n    this.emit('subscribe_behavior_alerts');\n  }\n\n  unsubscribeFromBehaviorAlerts(): void {\n    this.emit('unsubscribe_behavior_alerts');\n  }\n\n  subscribeToPerformanceUpdates(): void {\n    this.emit('subscribe_performance_updates');\n  }\n\n  unsubscribeFromPerformanceUpdates(): void {\n    this.emit('unsubscribe_performance_updates');\n  }\n\n  subscribeToNotifications(): void {\n    this.emit('subscribe_notifications');\n  }\n\n  unsubscribeFromNotifications(): void {\n    this.emit('unsubscribe_notifications');\n  }\n\n  // AI/ML real-time features\n  subscribeToAIModelUpdates(): void {\n    this.emit('subscribe_ai_model_updates');\n  }\n\n  unsubscribeFromAIModelUpdates(): void {\n    this.emit('unsubscribe_ai_model_updates');\n  }\n\n  requestAIPrediction(modelId: string, data: any): void {\n    this.emit('request_ai_prediction', {\n      model_id: modelId,\n      data: data,\n    });\n  }\n\n  // Monitoring real-time features\n  startMonitoringSession(studentId: number, settings: any): void {\n    this.emit('start_monitoring_session', {\n      student_id: studentId,\n      settings: settings,\n    });\n  }\n\n  stopMonitoringSession(sessionId: number): void {\n    this.emit('stop_monitoring_session', {\n      session_id: sessionId,\n    });\n  }\n\n  // Utility methods\n  isConnected(): boolean {\n    return this.socket?.connected || false;\n  }\n\n  getConnectionState(): string {\n    if (!this.socket) return 'disconnected';\n    return this.socket.connected ? 'connected' : 'connecting';\n  }\n\n  // Typed event handlers\n  onChatMessage(handler: (message: ChatMessage) => void): void {\n    this.on('chat_message', handler);\n  }\n\n  onBehaviorAlert(handler: (event: BehaviorEvent) => void): void {\n    this.on('behavior_alert', handler);\n  }\n\n  onPerformanceUpdate(handler: (update: any) => void): void {\n    this.on('performance_update', handler);\n  }\n\n  onNotification(handler: (notification: Notification) => void): void {\n    this.on('notification', handler);\n  }\n\n  onAIModelUpdate(handler: (update: any) => void): void {\n    this.on('ai_model_update', handler);\n  }\n\n  onAIPredictionResult(handler: (result: any) => void): void {\n    this.on('ai_prediction_result', handler);\n  }\n\n  onMonitoringFrame(handler: (frame: any) => void): void {\n    this.on('monitoring_frame', handler);\n  }\n\n  onMonitoringEvent(handler: (event: BehaviorEvent) => void): void {\n    this.on('monitoring_event', handler);\n  }\n\n  // Room management\n  getRooms(): Promise<string[]> {\n    return new Promise((resolve, reject) => {\n      if (!this.socket?.connected) {\n        reject(new Error('WebSocket not connected'));\n        return;\n      }\n\n      this.socket.emit('get_rooms');\n      this.socket.once('rooms_list', (rooms: string[]) => {\n        resolve(rooms);\n      });\n    });\n  }\n\n  getRoomParticipants(roomId: string): Promise<User[]> {\n    return new Promise((resolve, reject) => {\n      if (!this.socket?.connected) {\n        reject(new Error('WebSocket not connected'));\n        return;\n      }\n\n      this.socket.emit('get_room_participants', { room_id: roomId });\n      this.socket.once('room_participants', (participants: User[]) => {\n        resolve(participants);\n      });\n    });\n  }\n\n  // Presence management\n  setPresence(status: 'online' | 'away' | 'busy' | 'offline'): void {\n    this.emit('set_presence', { status });\n  }\n\n  // Typing indicators\n  startTyping(roomId: string): void {\n    this.emit('start_typing', { room_id: roomId });\n  }\n\n  stopTyping(roomId: string): void {\n    this.emit('stop_typing', { room_id: roomId });\n  }\n\n  onTypingStart(handler: (data: { room_id: string; user: User }) => void): void {\n    this.on('typing_start', handler);\n  }\n\n  onTypingStop(handler: (data: { room_id: string; user: User }) => void): void {\n    this.on('typing_stop', handler);\n  }\n\n  // File sharing\n  shareFile(roomId: string, file: File, onProgress?: (progress: number) => void): void {\n    const reader = new FileReader();\n    reader.onload = () => {\n      this.emit('share_file', {\n        room_id: roomId,\n        file_name: file.name,\n        file_type: file.type,\n        file_size: file.size,\n        file_data: reader.result,\n      });\n    };\n    reader.readAsArrayBuffer(file);\n  }\n\n  onFileShared(handler: (data: any) => void): void {\n    this.on('file_shared', handler);\n  }\n\n  // Error handling\n  onError(handler: (error: any) => void): void {\n    this.on('error', handler);\n  }\n\n  // Cleanup\n  cleanup(): void {\n    this.messageHandlers.clear();\n    this.disconnect();\n  }\n}\n\n// Create singleton instance\nexport const webSocketService = new WebSocketService();\n\n// Export for use in other modules\nexport default webSocketService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}